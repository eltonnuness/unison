/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
alter table IPADRESS drop constraint FK99F7E25DDC9F2585
alter table MESSAGE drop constraint FK63B68BE79F532765
alter table MESSAGE drop constraint FK63B68BE78CB2634F
alter table NEWSGROUP drop constraint FKB87A476CF51A4703
alter table NEWSGROUP_MESSAGE drop constraint FK16684E146654778F
alter table NEWSGROUP_MESSAGE drop constraint FK16684E1473722B0F
alter table NEWSGROUP_TOPIC drop constraint FKC76B3E7C6654778F
alter table NEWSGROUP_TOPIC drop constraint FKC76B3E7C8CB2634F
alter table USENETUSER drop constraint FKC6EFAF81DC9F2585
drop table IPADRESS if exists
drop table LOCATION if exists
drop table MESSAGE if exists
drop table NEWSGROUP if exists
drop table NEWSGROUP_MESSAGE if exists
drop table NEWSGROUP_TOPIC if exists
drop table TOPIC if exists
drop table USENETUSER if exists
create table IPADRESS (IP_ID integer generated by default as identity (start with 1), IPADDRESS varchar(255), LOCATION_ID integer, primary key (IP_ID))
create table LOCATION (LOCATION_ID integer generated by default as identity (start with 1), CITY varchar(255), COUNTRY varchar(255), COUNTRYCODE varchar(255), GUESSED bit, primary key (LOCATION_ID))
create table MESSAGE (MESSAGE_ID integer generated by default as identity (start with 1), DateCreated date not null, UsenetMessageID varchar(255) not null, subject varchar(255) not null, USENETUSER_ID integer, TOPIC_ID integer, referencedMessages varchar(255), MessageBody varbinary(255), primary key (MESSAGE_ID))
create table NEWSGROUP (NEWSGROUP_ID integer generated by default as identity (start with 1), name varchar(255) not null, parentNewsGroup integer, lastIndex integer, lasttotal integer, firstmessage integer, lastmessage integer, fullName varchar(255), lastNode bit, primary key (NEWSGROUP_ID))
create table NEWSGROUP_MESSAGE (NEWSGROUP_ID integer not null, MESSAGE_ID integer not null, primary key (MESSAGE_ID, NEWSGROUP_ID))
create table NEWSGROUP_TOPIC (TOPIC_ID integer not null, NEWSGROUP_ID integer not null, primary key (TOPIC_ID, NEWSGROUP_ID))
create table TOPIC (TOPIC_ID integer generated by default as identity (start with 1), subject varchar(255) not null, primary key (TOPIC_ID))
create table USENETUSER (USENETUSER_ID integer generated by default as identity (start with 1), name varchar(255) not null, email varchar(255) not null, ipaddress varchar(255) not null, gender varchar(255), LOCATION_ID integer, primary key (USENETUSER_ID))
alter table IPADRESS add constraint FK99F7E25DDC9F2585 foreign key (LOCATION_ID) references LOCATION
alter table MESSAGE add constraint FK63B68BE79F532765 foreign key (USENETUSER_ID) references USENETUSER
alter table MESSAGE add constraint FK63B68BE78CB2634F foreign key (TOPIC_ID) references TOPIC
alter table NEWSGROUP add constraint FKB87A476CF51A4703 foreign key (parentNewsGroup) references NEWSGROUP
alter table NEWSGROUP_MESSAGE add constraint FK16684E146654778F foreign key (NEWSGROUP_ID) references NEWSGROUP
alter table NEWSGROUP_MESSAGE add constraint FK16684E1473722B0F foreign key (MESSAGE_ID) references MESSAGE
alter table NEWSGROUP_TOPIC add constraint FKC76B3E7C6654778F foreign key (NEWSGROUP_ID) references NEWSGROUP
alter table NEWSGROUP_TOPIC add constraint FKC76B3E7C8CB2634F foreign key (TOPIC_ID) references TOPIC
alter table USENETUSER add constraint FKC6EFAF81DC9F2585 foreign key (LOCATION_ID) references LOCATION
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
